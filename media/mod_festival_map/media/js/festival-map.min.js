document.addEventListener("DOMContentLoaded",(function(){if("undefined"!=typeof L)if(festivalMapData&&0!==festivalMapData.length)if(document.getElementById("map")){var map=L.map("map").setView([defaultLat,defaultLon],defaultZoom);L.tileLayer("https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=ff6e50f5a0c7445082ef38637a69cab1",{maxZoom:12}).addTo(map);var categoryClasses={12:"theme-color-energy",13:"theme-color-community-engagement",14:"theme-color-circularity",15:"theme-color-food-nature",16:"theme-color-travel"};if(festivalMapData.forEach((function(article){if(article.latitude&&article.longitude){var markerIcon=L.divIcon({className:categoryClasses[article.category_id]||"theme-color-default",iconSize:[117,117],html:'<div class="circle-pin"></div>'});L.marker([parseFloat(article.latitude),parseFloat(article.longitude)],{icon:markerIcon}).addTo(map).bindPopup(`<div class="uk-text-bold">${article.title}</div>`)}})),festivalMapData.length>1){var bounds=new L.LatLngBounds(festivalMapData.map((article=>[parseFloat(article.latitude),parseFloat(article.longitude)])));map.fitBounds(bounds)}}else console.error("Map container #map not found.");else console.warn("No festival map data available.");else console.error("Leaflet.js is not loaded.")}));