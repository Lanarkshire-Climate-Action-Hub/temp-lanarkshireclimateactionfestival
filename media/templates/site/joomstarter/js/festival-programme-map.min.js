document.addEventListener("DOMContentLoaded",(function(){if("undefined"!=typeof mapLocations&&Array.isArray(mapLocations)&&0!==mapLocations.length)if(document.getElementById("map")){var map=L.map("map",{attributionControl:!1}).setView([55.608314,-3.787285],7);L.tileLayer("https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=ff6e50f5a0c7445082ef38637a69cab1",{maxZoom:12}).addTo(map),mapLocations.forEach((function(article){if(article.latitude&&article.longitude){var lat=parseFloat(article.latitude),lng=parseFloat(article.longitude);if(isNaN(lat)||isNaN(lng))console.warn("Skipping marker due to invalid lat/lng:",article.title,lat,lng);else{var markerIcon=L.divIcon({className:article.categoryClass.trim(),iconSize:[117,117],html:article.markerHtml});L.marker([lat,lng],{icon:markerIcon}).addTo(map).bindPopup(`\n                    <div class="uk-text-bold">${article.title}</div>\n                    <a href="${article.article_url}" class="uk-button uk-button-primary download_border twenty_six uk-text-white">\n                        View Event\n                    </a>\n                `)}}else console.warn("Skipping marker, missing lat/lng for:",article.title)}));var bounds=new L.LatLngBounds(mapLocations.map((article=>[article.latitude,article.longitude])));mapLocations.length>1&&map.fitBounds(bounds)}else console.error("Map container #map not found.");else console.error("No valid map locations found.")}));